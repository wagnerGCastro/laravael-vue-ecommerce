{"version":3,"sources":["webpack:///./resources/js/src/views/Apps/Chat/VideoCall.vue?a558","webpack:///./resources/js/src/components/Agora/AgoraVideoCall.vue?54a9","webpack:///./resources/js/src/views/Apps/Chat/VideoCall.vue?b808","webpack:///resources/js/src/views/Apps/Chat/VideoCall.vue","webpack:///./resources/js/src/components/Agora/AgoraVideoCall.vue","webpack:///./resources/js/src/components/Agora/AgoraVideoCall.vue?58bd","webpack:///./resources/js/src/views/Apps/Chat/VideoCall.vue","webpack:///resources/js/src/components/Agora/AgoraVideoCall.vue","webpack:///./resources/js/src/config/agora.config.js"],"names":["name","components","AgoraVideoCall","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","class","readyState","on","handleExit","_v","attendeeMode","handleCamera","_e","handleMic","streamList","length","switchDisplay","displayMode","hideRemote","data","videoProfile","channel","transcode","baseMode","uid","undefined","mounted","created","appId","alert","scopedSlots","_u","key","fn","_s","proxy","1","2","3","4","5","6","7","client","localStream","shareClient","shareStream","props","methods","streamInit","streamID","audio","video","screen","defaultConfig","stream","setVideoProfile","subscribeStreamEvents","rt","evt","subscribe","err","removeStream","addStream","getId","map","item","close","element","parentNode","removeChild","tempList","splice","index","repeatition","push","concat","e","currentTarget","classList","toggle","isVideoOn","isAudioOn","style","display","contains","unpublish","$store","dispatch","$","AgoraRTC","createClient","init","join","$nextTick","canvas","addEventListener","global","_toolbarToggle","clearTimeout","btnGroup","add","setTimeout","remove","beforeUpdate","no","dom","document","createElement","setAttribute","id","appendChild","play","player","resize","beforeDestroy","AGORA_APP_ID","process","env","VUE_APP_AGORA_KEY"],"mappings":"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","file":"45.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{staticClass:\"wrapper meeting iq-card mb-0\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\"\\n    Room:Â \"),_c('span',{attrs:{\"id\":\"room-name\"}},[_vm._v(_vm._s(_vm.channel))])]},proxy:true}])},[_vm._v(\" \"),_c('div',{staticClass:\"ag-main\"},[_c('div',{staticClass:\"ag-container\"},[_c('AgoraVideoCall',{attrs:{\"videoProfile\":_vm.videoProfile,\"channel\":_vm.channel,\"transcode\":_vm.transcode,\"attendeeMode\":_vm.attendeeMode,\"baseMode\":_vm.baseMode,\"appId\":_vm.appId,\"uid\":_vm.uid}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgoraVideoCall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgoraVideoCall.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCall.vue?vue&type=script&lang=js&\"","<template>\n  <b-card class=\"wrapper meeting iq-card mb-0\">\n    <template v-slot:header>\n      Room:&nbsp;<span id=\"room-name\">{{channel}}</span>\n    </template>\n    <div class=\"ag-main\">\n      <div class=\"ag-container\">\n        <AgoraVideoCall\n          :videoProfile=\"videoProfile\"\n          :channel=\"channel\"\n          :transcode=\"transcode\"\n          :attendeeMode=\"attendeeMode\"\n          :baseMode=\"baseMode\"\n          :appId=\"appId\"\n          :uid=\"uid\"></AgoraVideoCall>\n      </div>\n    </div>\n  </b-card>\n</template>\n<script>\nimport * as Cookies from 'js-cookie'\nimport { AGORA_APP_ID } from '../../../config/agora.config'\nimport AgoraVideoCall from '../../../components/Agora/AgoraVideoCall'\nexport default {\n  name: 'VideoCall',\n  components: {\n    AgoraVideoCall\n  },\n  data () {\n    return {\n      videoProfile: Cookies.get('videoProfile').split(',')[0] || '480p_4',\n      channel: Cookies.get('channel') || 'test',\n      transcode: Cookies.get('transcode') || 'interop',\n      attendeeMode: Cookies.get('attendeeMode') || 'video',\n      baseMode: Cookies.get('baseMode') || 'avc',\n      uid: undefined\n    }\n  },\n  mounted () {\n  },\n  created () {\n    this.appId = AGORA_APP_ID\n    if (!this.appId) {\n      return alert('Get App ID first!')\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./AgoraVideoCall.vue?vue&type=template&id=ba89a7e6&\"\nimport script from \"./AgoraVideoCall.vue?vue&type=script&lang=js&\"\nexport * from \"./AgoraVideoCall.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"ag-canvas\"}},[_c('div',{staticClass:\"ag-btn-group\"},[_c('span',{staticClass:\"ag-btn exitBtn\",class:{'disabled': !_vm.readyState},attrs:{\"title\":\"Exit\"},on:{\"click\":_vm.handleExit}},[_c('i',{staticClass:\"ri-logout-box-line ag-icon ag-icon-leave\"})]),_vm._v(\" \"),(_vm.attendeeMode === 'video')?_c('span',{staticClass:\"ag-btn videoControlBtn\",attrs:{\"title\":\"Enable/Disable Video\"},on:{\"click\":_vm.handleCamera}},[_c('i',{staticClass:\"ri-camera-line ag-icon-camera\"}),_vm._v(\" \"),_c('i',{staticClass:\"ri-camera-off-line ag-icon-camera-off\"})]):_vm._e(),_vm._v(\" \"),(_vm.attendeeMode !== 'audience')?_c('span',{staticClass:\"ag-btn audioControlBtn\",attrs:{\"title\":\"Enable/Disable Audio\"},on:{\"click\":_vm.handleMic}},[_c('i',{staticClass:\"ri-mic-2-fill ag-icon-mic\"}),_vm._v(\" \"),_c('i',{staticClass:\"ri-mic-off-line ag-icon-mic-off\"})]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"ag-btn displayModeBtn\",class:{'disabled': _vm.streamList.length > 4},attrs:{\"title\":\"Switch Display Mode\"},on:{\"click\":_vm.switchDisplay}},[_c('i',{staticClass:\"ri-tv-2-line ag-icon-switch-display\"})]),_vm._v(\" \"),_c('span',{staticClass:\"ag-btn disableRemoteBtn\",class:{'disabled': _vm.streamList.length > 4 || _vm.displayMode !== 'pip'},attrs:{\"title\":\"Hide Remote Stream\"},on:{\"click\":_vm.hideRemote}},[_c('i',{staticClass:\"ri-base-station-line ag-icon-remove-pip\"})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./VideoCall.vue?vue&type=template&id=48e8f352&\"\nimport script from \"./VideoCall.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoCall.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"ag-canvas\">\n    <div class=\"ag-btn-group\">\n      <span\n        @click=\"handleExit\"\n        class=\"ag-btn exitBtn\"\n        :class=\"{'disabled': !readyState}\"\n        title=\"Exit\">\n        <i class=\"ri-logout-box-line ag-icon ag-icon-leave\"></i>\n      </span>\n      <span v-if=\"attendeeMode === 'video'\"\n        @click=\"handleCamera\"\n        class=\"ag-btn videoControlBtn\"\n        title=\"Enable/Disable Video\">\n        <i class=\"ri-camera-line ag-icon-camera\" />\n        <i class=\"ri-camera-off-line ag-icon-camera-off\" />\n      </span>\n      <span v-if=\"attendeeMode !== 'audience'\"\n        @click=\"handleMic\"\n        class=\"ag-btn audioControlBtn\"\n        title=\"Enable/Disable Audio\">\n        <i class=\"ri-mic-2-fill ag-icon-mic\"></i>\n        <i class=\"ri-mic-off-line ag-icon-mic-off\"></i>\n      </span>\n      <span\n        @click=\"switchDisplay\"\n        class=\"ag-btn displayModeBtn\"\n        :class=\"{'disabled': streamList.length > 4}\"\n        title=\"Switch Display Mode\">\n        <i class=\"ri-tv-2-line ag-icon-switch-display\"></i>\n      </span>\n      <span\n        class= \"ag-btn disableRemoteBtn\"\n        :class=\"{'disabled': streamList.length > 4 || displayMode !== 'pip'}\"\n        @click=\"hideRemote\"\n        title=\"Hide Remote Stream\">\n        <i class=\"ri-base-station-line ag-icon-remove-pip\"></i>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { merge } from 'lodash'\nimport * as Cookies from 'js-cookie'\nconst tileCanvas = {\n  1: ['span 12/span 24'],\n  2: ['span 12/span 12/13/25', 'span 12/span 12/13/13'],\n  3: ['span 6/span 12', 'span 6/span 12', 'span 6/span 12/7/19'],\n  4: [\n    'span 6/span 12',\n    'span 6/span 12',\n    'span 6/span 12',\n    'span 6/span 12/7/13'\n  ],\n  5: [\n    'span 3/span 4/13/9',\n    'span 3/span 4/13/13',\n    'span 3/span 4/13/17',\n    'span 3/span 4/13/21',\n    'span 9/span 16/10/21'\n  ],\n  6: [\n    'span 3/span 4/13/7',\n    'span 3/span 4/13/11',\n    'span 3/span 4/13/15',\n    'span 3/span 4/13/19',\n    'span 3/span 4/13/23',\n    'span 9/span 16/10/21'\n  ],\n  7: [\n    'span 3/span 4/13/5',\n    'span 3/span 4/13/9',\n    'span 3/span 4/13/13',\n    'span 3/span 4/13/17',\n    'span 3/span 4/13/21',\n    'span 3/span 4/13/25',\n    'span 9/span 16/10/21'\n  ]\n}\n\nexport default {\n  data () {\n    return {\n      client: {},\n      localStream: {},\n      shareClient: {},\n      shareStream: {},\n      displayMode: 'pip',\n      streamList: [],\n      readyState: false\n    }\n  },\n\n  props: [\n    'transcode',\n    'attendeeMode',\n    'videoProfile',\n    'channel',\n    'baseMode',\n    'appId',\n    'uid'\n  ],\n\n  methods: {\n    streamInit (uid, attendeeMode, videoProfile, config) {\n      const defaultConfig = {\n        streamID: uid,\n        audio: true,\n        video: true,\n        screen: false\n      }\n\n      switch (attendeeMode) {\n        case 'audio-only':\n          defaultConfig.video = false\n          break\n        case 'audience':\n          defaultConfig.video = false\n          defaultConfig.audio = false\n          break\n        default:\n        case 'video':\n          break\n      }\n\n      // eslint-disable-next-line no-undef\n      const stream = AgoraRTC.createStream(merge(defaultConfig, config))\n      stream.setVideoProfile(videoProfile)\n      return stream\n    },\n\n    subscribeStreamEvents () {\n      const rt = this\n      rt.client.on('stream-added', function (evt) {\n        const stream = evt.stream\n        // eslint-disable-next-line handle-callback-err\n        rt.client.subscribe(stream, function (err) {\n        })\n      })\n\n      rt.client.on('peer-leave', function (evt) {\n        rt.removeStream(evt.uid)\n      })\n\n      rt.client.on('stream-subscribed', function (evt) {\n        const stream = evt.stream\n        rt.addStream(stream)\n      })\n\n      rt.client.on('stream-removed', function (evt) {\n        const stream = evt.stream\n        rt.removeStream(stream.getId())\n      })\n    },\n\n    removeStream (uid) {\n      this.streamList.map((item, index) => {\n        if (item.getId() === uid) {\n          item.close()\n          const element = document.querySelector('#ag-item-' + uid)\n          if (element) {\n            element.parentNode.removeChild(element)\n          }\n          const tempList = [...this.streamList]\n          tempList.splice(index, 1)\n          this.streamList = tempList\n        }\n      })\n    },\n\n    addStream (stream, push = false) {\n      const repeatition = this.streamList.some(item => {\n        return item.getId() === stream.getId()\n      })\n      if (repeatition) {\n        return\n      }\n      if (push) {\n        this.streamList = this.streamList.concat([stream])\n      } else {\n        this.streamList = [stream].concat(this.streamList)\n      }\n    },\n\n    handleCamera (e) {\n      e.currentTarget.classList.toggle('off')\n      this.localStream.isVideoOn()\n        ? this.localStream.disableVideo()\n        : this.localStream.enableVideo()\n    },\n\n    handleMic (e) {\n      e.currentTarget.classList.toggle('off')\n      this.localStream.isAudioOn()\n        ? this.localStream.disableAudio()\n        : this.localStream.enableAudio()\n    },\n\n    switchDisplay (e) {\n      if (\n        e.currentTarget.classList.contains('disabled') ||\n        this.streamList.length <= 1\n      ) {\n        return\n      }\n      if (this.displayMode === 'pip') {\n        this.displayMode = 'tile'\n      } else if (this.displayMode === 'tile') {\n        this.displayMode = 'pip'\n      } else if (this.displayMode === 'share') {\n        // do nothing or alert, tbd\n      } else {\n      }\n    },\n\n    hideRemote (e) {\n      if (\n        e.currentTarget.classList.contains('disabled') ||\n        this.streamList.length <= 1\n      ) {\n        return\n      }\n      const id = this.streamList[this.streamList.length - 1].getId()\n      const list = Array.from(\n        document.querySelectorAll(`.ag-item:not(#ag-item-${id})`)\n      )\n      list.map(item => {\n        if (item.style.display !== 'none') {\n          item.style.display = 'none'\n        } else {\n          item.style.display = 'block'\n        }\n      })\n    },\n\n    handleExit (e) {\n      if (e.currentTarget.classList.contains('disabled')) {\n        return\n      }\n      try {\n        this.client && this.client.unpublish(this.localStream)\n        this.localStream && this.localStream.close()\n        this.client &&\n          this.client.leave(\n            () => {\n            },\n            () => {\n            }\n          )\n      } finally {\n        this.readyState = false\n        this.client = null\n        this.localStream = null\n        // redirect to index\n        Cookies.set('channel', undefined)\n        this.$store.dispatch('Chat/videoCallAction', false)\n      }\n    }\n  },\n\n  created () {\n    const $ = this\n    // init AgoraRTC local client\n    // eslint-disable-next-line no-undef\n    $.client = AgoraRTC.createClient({ mode: $.transcode })\n    $.client.init($.appId, () => {\n      $.subscribeStreamEvents()\n      $.client.join($.appId, $.channel, $.uid, uid => {\n        // create local stream\n        // It is not recommended to setState in function addStream\n        $.localStream = this.streamInit(uid, $.attendeeMode, $.videoProfile)\n        $.localStream.init(\n          () => {\n            if ($.attendeeMode !== 'audience') {\n              $.addStream($.localStream, true)\n              // eslint-disable-next-line handle-callback-err\n              $.client.publish($.localStream, err => {\n              })\n            }\n            $.readyState = true\n          },\n          // eslint-disable-next-line handle-callback-err\n          err => {\n            $.readyState = true\n          }\n        )\n      })\n    })\n  },\n\n  mounted () {\n    this.$nextTick(() => {\n      // add listener to control btn group\n      const canvas = document.querySelector('#ag-canvas')\n      const btnGroup = document.querySelector('.ag-btn-group')\n      canvas.addEventListener('mousemove', () => {\n        if (global._toolbarToggle) {\n          clearTimeout(global._toolbarToggle)\n        }\n        btnGroup.classList.add('active')\n        global._toolbarToggle = setTimeout(function () {\n          btnGroup.classList.remove('active')\n        }, 2000)\n      })\n    })\n  },\n\n  beforeUpdate () {\n    const $ = this\n    // rerendering\n    const canvas = document.querySelector('#ag-canvas')\n    // pip mode (can only use when less than 4 people in channel)\n    if ($.displayMode === 'pip') {\n      const no = $.streamList.length\n      if (no > 4) {\n        $.displayMode = 'tile'\n        return\n      }\n      $.streamList.map((item, index) => {\n        const id = item.getId()\n        let dom = document.querySelector('#ag-item-' + id)\n        if (!dom) {\n          dom = document.createElement('section')\n          dom.setAttribute('id', 'ag-item-' + id)\n          dom.setAttribute('class', 'ag-item')\n          canvas.appendChild(dom)\n          item.play('ag-item-' + id)\n        }\n        if (index === no - 1) {\n          dom.setAttribute('style', 'grid-area: span 12/span 24/13/25')\n        } else {\n          dom.setAttribute(\n            'style',\n            `grid-area: span 3/span 4/${4 + 3 * index}/25;\n          z-index:1;width:calc(100% - 20px);height:calc(100% - 20px)`\n          )\n        }\n        item.player.resize && item.player.resize()\n      })\n    } else if ($.displayMode === 'tile') {\n      // tile mode\n      const no = $.streamList.length\n      $.streamList.map((item, index) => {\n        const id = item.getId()\n        let dom = document.querySelector('#ag-item-' + id)\n        if (!dom) {\n          dom = document.createElement('section')\n          dom.setAttribute('id', 'ag-item-' + id)\n          dom.setAttribute('class', 'ag-item')\n          canvas.appendChild(dom)\n          item.play('ag-item-' + id)\n        }\n        dom.setAttribute('style', `grid-area: ${tileCanvas[no][index]}`)\n        item.player.resize && item.player.resize()\n      })\n    } else if ($.displayMode === 'share') {\n      // screen share mode (tbd)\n    }\n  },\n\n  beforeDestroy () {\n    this.client && this.client.unpublish(this.localStream)\n    this.localStream && this.localStream.close()\n    this.client &&\n      this.client.leave(\n        () => {\n        },\n        () => {\n        }\n      )\n  }\n}\n</script>\n","export const AGORA_APP_ID = process.env.VUE_APP_AGORA_KEY\n"],"sourceRoot":""}